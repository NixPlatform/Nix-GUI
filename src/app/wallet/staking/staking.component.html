<mat-drawer-container>
  <mat-drawer #help position="end" mode="over" disableClose="true" class="sidebar">
    <help-bar [navbar]="help" [faq]="faq"></help-bar>
  </mat-drawer>

  <mat-drawer-content>
    <page-header heading="Staking" [navbar]="help"></page-header>
    <p class="desc">
      Your wallet will automatically stake any of your transactions that were sent to a public address (i.e. ’N’ address) and are mature (have 501 confirmations from the network).<br>
      Your wallet must be on in order to stake, although you can choose to stake with a VPS instead.
      
      <a href="" target="_blank">Learn more</a>
    </p>

    <div class="card zdepth1 card1">
      <div class="balance" fxLayout.gt-md="row" fxLayout.lt-md="column" fxLayoutAlign="center start" fxFlexOrder.lt-md="3">
        <div fxFlexOrder.lt-md="1" fxFlex="100">
          <div fxLayout="row" class="label">Amount staking</div>
          <div fxLayout="row" class="nix-row">
            <p class="value-label">{{stakingAmount | number: '.2'}}
              <span class="suffix-label">NIX</span>
            </p>
          </div>
          <div class="divider1"></div>
          <div fxLayout="row"><!-- (change)="torToggled($event)" [checked]="torEnabled" -->
            <mat-slide-toggle class="toggle" (change)="stakingToggled($event)" [checked]="isStaking">
              Staking: {{isStaking ? "ON" : "OFF"}}
            </mat-slide-toggle>
          </div>
        </div>
      </div>
    </div>

    <div class="card zdepth1">
      <div class="balance" fxLayout.gt-md="row" fxLayout.lt-md="column" fxLayoutAlign="center start" fxFlexOrder.lt-md="3">
        <div fxFlexOrder.lt-md="1" fxFlex="100" class="ghostnodesContainer" (click)="showAllGhostnodes()">
          <div fxLayout="row" class="label">Staking overview</div>
          <div fxLayout="row" class="nix-row">
            <p class="value-label"></p>
          </div>

          <div fxLayout="row" class="btc">
            <span></span>
          </div>
        </div>
      </div>
    </div>

    <div class="card zdepth1">
      <div class="balance" fxLayout.gt-md="row" fxLayout.lt-md="column" fxLayoutAlign="center start" fxFlexOrder.lt-md="3">
        <div fxFlexOrder.lt-md="1" fxFlex="100">
          <div fxLayout="row" class="label">Time to next payout</div>
          <div fxLayout="row" class="nix-row">
            <p class="value-label">{{nextTimeStr}}
              <span class="suffix-label" *ngIf="isStaking"> hours</span>
              <span class="suffix-label" *ngIf="!isStaking"> You are not staking</span>
            </p>
          </div>
          <div class="divider1"></div>
          <div fxLayout="row">
            <p class="payout-label" *ngIf="isStaking">Last payout:
              <span>{{lastSearchTime | date:'dd MMM yyyy HH:mm'}}</span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <h5 class="tableHead section-label">Transactions being staked</h5>
    <div class="tableHead">
      <mat-table [dataSource]="dataSource">
        <ng-container matColumnDef="Amount" cdkColumnDef="Amount">
          <mat-header-cell *matHeaderCellDef>Amount</mat-header-cell>
          <mat-cell *matCellDef="let element" class="matCell">
            {{element.amount}}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="Status">
          <mat-header-cell *matHeaderCellDef>Status</mat-header-cell>
          <mat-cell *matCellDef="let element" class="matCell">
            Staked
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="Created">
          <mat-header-cell *matHeaderCellDef>Created</mat-header-cell>
          <mat-cell *matCellDef="let element" class="matCell">
            {{element.created | date:'dd MMM yyyy HH:mm'}}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="Detail">
          <mat-header-cell *matHeaderCellDef>Transaction details</mat-header-cell>
          <mat-cell *matCellDef="let element" class="matCell">
            {{element.txid}}
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="transactionColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: transactionColumns"></mat-row>
      </mat-table>
    </div>

    <div fxLayout="row">
      <p class="notif-label" *ngIf="!isStaking">Enable staking
        <span> in order to display staked transactions here</span>
      </p>
    </div>
  </mat-drawer-content>
</mat-drawer-container>