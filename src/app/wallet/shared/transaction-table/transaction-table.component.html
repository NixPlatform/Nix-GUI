<!-- @TODO add empty result box if no result found. & Hide progress bar if no result forund-->
<md-progress-bar mode="indeterminate" *ngIf="!txService.txs.length && txService.loading"></md-progress-bar>
<!--<div fxLayoutAlign="center center" *ngIf="!txService.txs.length > 0">-->
  <!--<md-spinner></md-spinner>-->
<!--</div>-->
<app-grid>
  <div class="grid-row grid-header" *ngIf="display.header">
    <div class="cell-date" *ngIf="display.date">date</div>
    <div class="cell-category" *ngIf="display.category">category</div>
    <div class="cell-senderAddress" *ngIf="display.senderAddress">address</div>
    <div class="cell-txid" *ngIf="display.txid">txid</div>
    <div class="cell-blockIndex" *ngIf="display.blockIndex">blockindex</div>
    <div class="cell-confirmations" *ngIf="display.confirmations">confirmations</div>
    <div class="cell-amount" *ngIf="display.amount">amount</div>
  </div>
  <ng-container *ngFor="let tx of txService.txs let i=index">
    <md-expansion-panel class="history-list" *ngIf="i < display.txDisplayAmount" (click)="showExpandedTransactionDetail(tx)">

      <md-expansion-panel-header fxLayout="row" fxLayoutGap="10px" layout-padding>

        <!-- Date -->
        <md-panel-title fxFlex.lg="15" fxFlex.lt-lg="100" *ngIf="display.date" class="history_date">
          {{ tx.getDate() }}
        </md-panel-title>

        <!-- Category icon -->
        <md-panel-title fxFlex.lg="5" fxFlex.lt-lg="100" *ngIf="display.category" class="history_cat_icon" [ngSwitch]="tx.category">
          <span mdTooltip="Staked" *ngSwitchCase="'stake'">
            <md-icon fontSet="faIcon" fontIcon="fa-plus" color="primary"></md-icon>
          </span>
          <span mdTooltip="Orphaned stake" *ngSwitchCase="'orphaned_stake'">
            <md-icon fontSet="faIcon" fontIcon="fa-remove" color="warn"></md-icon>
          </span>
          <span mdTooltip="Sent" *ngSwitchCase="'send'">
            <md-icon fontSet="faIcon" fontIcon="fa-arrow-right" color="warn"></md-icon>
          </span>
          <span mdTooltip="Received" *ngSwitchCase="'receive'">
            <md-icon fontSet="faIcon" fontIcon="fa-arrow-left"></md-icon>
          </span>
        </md-panel-title>

        <!-- Address -->
        <md-panel-title fxFlex.lg="57" fxFlex.lt-lg="100" *ngIf="display.senderAddress" class="history_longAddress">
          {{ tx.getAddress() }}
        </md-panel-title>

        <md-panel-title fxFlex.lg="20" fxFlex.lt-lg="100" *ngIf="display.txid" class="history_txt">
          <span md-line fxLayout.md="row" fxFlex="100%" fxLayout.lg="row">
            <span fxFlex="10"><b>TxId</b></span>
            <span fxFlex="80">{{ tx.txid }} </span>
          </span>
        </md-panel-title>

        <md-panel-title fxFlex.lg="20" fxFlex.lt-lg="100" *ngIf="display.blockIndex" class="history_blockIndex">
          <span md-line>Blockindex {{ tx.blockindex }}</span>
        </md-panel-title>

        <!-- Confirmations -->
        <md-panel-title fxFlex.lg="5" fxFlex.lt-lg="100" *ngIf="display.confirmations" class="history_confirmation">
          <span md-line mdTooltip="Confirmations"><md-icon fontSet="faIcon" fontIcon="fa-check-circle" class="confirmations"></md-icon> {{ tx.confirmations }}</span>
        </md-panel-title>

        <!-- Amount -->
        <md-panel-title fxFlex.lg="18" fxFlex.lt-lg="100" *ngIf="display.amount" class="history_amount">
          <span md-line><span class="amount">{{ tx.getAmount() }}</span> PART</span>
        </md-panel-title>

      </md-expansion-panel-header>


      <div class="container history_container" fxLayout="row" fxLayoutGap="10px" layout-padding>

        <div fxLayout="column" fxFlex="55">
          <div class="tx-detail-item" fxFlex>
            <b fxFlex.lg="30" fxFlex.md="40" fxFlex.lt-md="100">To/from:</b>
            <input class="md-right" fxFlex.lg="70" fxFlex.md="60" fxFlex.lt-md="100" value="{{ tx.getAddress() }}" placeholder="To/from">
          </div>
          <div class="tx-detail-item" fxFlex>
            <b fxFlex.lg="30" fxFlex.md="40" fxFlex.lt-md="100">Transaction ID:</b>
            <a fxFlex.lg="70" fxFlex.md="60" fxFlex.lt-md="100" class="md-right highlight" href="https://explorer-testnet.particl.io/tx/{{tx.txid}}" target="_blank">{{tx.txid}}</a>
          </div>
        </div>

        <div fxLayout.lg="column" fxFlex="45">
          <div class="tx-detail-item" fxFlex>
            <b fxFlex.lg="40" fxFlex.md="40" fxFlex.lt-md="100">Transaction fee:</b>
            <span fxFlex.lg="60" fxFlex.md="60" fxFlex.lt-md="100" class="md-right">{{tx.fee ? tx.fee : 0}} PART</span>
          </div>
          <div class="tx-detail-item" fxFlex>
            <b fxFlex.lg="30" fxFlex.md="40" fxFlex.lt-md="100">Net amount:</b>
            <span class="md-right" fxFlex.lg="70" fxFlex.md="60" fxFlex.lt-md="100">{{tx.fee ? tx.getAmount() - tx.fee : 0}} PART</span>
          </div>
        </div>

      </div><!-- .history_cointainer -->
    </md-expansion-panel>
  </ng-container>

  <pagination
    *ngIf="display.pagination && (txService.txs.length > 0||txService.currentPage>1)"
    [hidden]="!txService.txs.length"
    [boundaryLinks]="true"
    (pageChanged)="pageChanged($event)"
    [totalItems]="txService.txCount"
    [maxSize]="5" [rotate]="false"
    [(ngModel)]="txService.currentPage"
    class="pagination-sm center"
    previousText="&lsaquo;" nextText="&rsaquo;"
    firstText="&laquo;" lastText="&raquo;"
    [itemsPerPage]="txService.MAX_TXS_PER_PAGE">
  </pagination>
</app-grid>
